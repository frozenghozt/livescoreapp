{"ast":null,"code":"import axios from \"axios\";\nimport { API, accessDenied, apiError, apiStart, apiEnd } from \"../Actions/apiFootball.actions\";\n\nconst apiMiddleware = ({\n  dispatch\n}) => next => action => {\n  next(action);\n  if (action.type !== API) return;\n  const {\n    url,\n    onSuccess,\n    onFailure,\n    label,\n    headers\n  } = action.payload; // axios default configs\n\n  axios.defaults.headers.common[\"Content-Type\"] = \"application/json\";\n\n  if (label) {\n    dispatch(apiStart(label));\n  }\n\n  axios.request({\n    url,\n    method: \"GET\",\n    headers\n  }).then(({\n    data\n  }) => {\n    dispatch(onSuccess(data));\n  }).catch(error => {\n    dispatch(apiError(error));\n    dispatch(onFailure(error));\n\n    if (error.response && error.response.status === 403) {\n      dispatch(accessDenied(window.location.pathname));\n    }\n  }).finally(() => {\n    if (label) {\n      dispatch(apiEnd(label));\n    }\n  });\n};\n\nexport default apiMiddleware;","map":{"version":3,"sources":["C:/Users/diogo/Desktop/livescore/src/Redux/middleware/apiFootballMiddleware.js"],"names":["axios","API","accessDenied","apiError","apiStart","apiEnd","apiMiddleware","dispatch","next","action","type","url","onSuccess","onFailure","label","headers","payload","defaults","common","request","method","then","data","catch","error","response","status","window","location","pathname","finally"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SACEC,GADF,EAEEC,YAFF,EAGEC,QAHF,EAIEC,QAJF,EAKEC,MALF,QAMO,gCANP;;AAQA,MAAMC,aAAa,GAAG,CAAC;AAAEC,EAAAA;AAAF,CAAD,KAAmBC,IAAD,IAAWC,MAAD,IAAY;AAC5DD,EAAAA,IAAI,CAACC,MAAD,CAAJ;AAEA,MAAIA,MAAM,CAACC,IAAP,KAAgBT,GAApB,EAAyB;AAEzB,QAAM;AAAEU,IAAAA,GAAF;AAAOC,IAAAA,SAAP;AAAkBC,IAAAA,SAAlB;AAA6BC,IAAAA,KAA7B;AAAoCC,IAAAA;AAApC,MAAgDN,MAAM,CAACO,OAA7D,CAL4D,CAO5D;;AACAhB,EAAAA,KAAK,CAACiB,QAAN,CAAeF,OAAf,CAAuBG,MAAvB,CAA8B,cAA9B,IAAgD,kBAAhD;;AAEA,MAAIJ,KAAJ,EAAW;AACTP,IAAAA,QAAQ,CAACH,QAAQ,CAACU,KAAD,CAAT,CAAR;AACD;;AAEDd,EAAAA,KAAK,CACFmB,OADH,CACW;AACPR,IAAAA,GADO;AAEPS,IAAAA,MAAM,EAAE,KAFD;AAGPL,IAAAA;AAHO,GADX,EAMGM,IANH,CAMQ,CAAC;AAAEC,IAAAA;AAAF,GAAD,KAAc;AAClBf,IAAAA,QAAQ,CAACK,SAAS,CAACU,IAAD,CAAV,CAAR;AACD,GARH,EASGC,KATH,CASUC,KAAD,IAAW;AAChBjB,IAAAA,QAAQ,CAACJ,QAAQ,CAACqB,KAAD,CAAT,CAAR;AACAjB,IAAAA,QAAQ,CAACM,SAAS,CAACW,KAAD,CAAV,CAAR;;AAEA,QAAIA,KAAK,CAACC,QAAN,IAAkBD,KAAK,CAACC,QAAN,CAAeC,MAAf,KAA0B,GAAhD,EAAqD;AACnDnB,MAAAA,QAAQ,CAACL,YAAY,CAACyB,MAAM,CAACC,QAAP,CAAgBC,QAAjB,CAAb,CAAR;AACD;AACF,GAhBH,EAiBGC,OAjBH,CAiBW,MAAM;AACb,QAAIhB,KAAJ,EAAW;AACTP,MAAAA,QAAQ,CAACF,MAAM,CAACS,KAAD,CAAP,CAAR;AACD;AACF,GArBH;AAsBD,CApCD;;AAsCA,eAAeR,aAAf","sourcesContent":["import axios from \"axios\";\r\nimport {\r\n  API,\r\n  accessDenied,\r\n  apiError,\r\n  apiStart,\r\n  apiEnd,\r\n} from \"../Actions/apiFootball.actions\";\r\n\r\nconst apiMiddleware = ({ dispatch }) => (next) => (action) => {\r\n  next(action);\r\n\r\n  if (action.type !== API) return;\r\n\r\n  const { url, onSuccess, onFailure, label, headers } = action.payload;\r\n\r\n  // axios default configs\r\n  axios.defaults.headers.common[\"Content-Type\"] = \"application/json\";\r\n\r\n  if (label) {\r\n    dispatch(apiStart(label));\r\n  }\r\n\r\n  axios\r\n    .request({\r\n      url,\r\n      method: \"GET\",\r\n      headers,\r\n    })\r\n    .then(({ data }) => {\r\n      dispatch(onSuccess(data));\r\n    })\r\n    .catch((error) => {\r\n      dispatch(apiError(error));\r\n      dispatch(onFailure(error));\r\n\r\n      if (error.response && error.response.status === 403) {\r\n        dispatch(accessDenied(window.location.pathname));\r\n      }\r\n    })\r\n    .finally(() => {\r\n      if (label) {\r\n        dispatch(apiEnd(label));\r\n      }\r\n    });\r\n};\r\n\r\nexport default apiMiddleware;\r\n"]},"metadata":{},"sourceType":"module"}