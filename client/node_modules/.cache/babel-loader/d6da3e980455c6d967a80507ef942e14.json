{"ast":null,"code":"import axios from \"axios\";\nimport { API, accessDenied, apiError, apiStart, apiEnd } from \"../Actions/apiFootball.actions\";\n\nconst apiMiddleware = ({\n  dispatch\n}) => next => action => {\n  console.log(\"getting in api middleware\", action);\n  next(action);\n  if (action.type !== API) return;\n  const {\n    url,\n    onSuccess,\n    onFailure,\n    label,\n    headers\n  } = action.payload; // axios default configs\n\n  axios.defaults.headers.common[\"Content-Type\"] = \"application/json\";\n\n  if (label) {\n    dispatch(apiStart(label));\n  }\n\n  axios.request({\n    url,\n    method: \"GET\",\n    headers\n  }).then(({\n    data\n  }) => {\n    console.log(data);\n    dispatch(onSuccess(data));\n  }).catch(error => {\n    dispatch(apiError(error));\n    dispatch(onFailure(error));\n\n    if (error.response && error.response.status === 403) {\n      dispatch(accessDenied(window.location.pathname));\n    }\n  }).finally(() => {\n    if (label) {\n      dispatch(apiEnd(label));\n    }\n  });\n};\n\nexport default apiMiddleware;","map":{"version":3,"sources":["C:/Users/diogo/Desktop/livescore/src/Redux/middleware/apiFootballMiddleware.js"],"names":["axios","API","accessDenied","apiError","apiStart","apiEnd","apiMiddleware","dispatch","next","action","console","log","type","url","onSuccess","onFailure","label","headers","payload","defaults","common","request","method","then","data","catch","error","response","status","window","location","pathname","finally"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SACEC,GADF,EAEEC,YAFF,EAGEC,QAHF,EAIEC,QAJF,EAKEC,MALF,QAMO,gCANP;;AAQA,MAAMC,aAAa,GAAG,CAAC;AAAEC,EAAAA;AAAF,CAAD,KAAmBC,IAAD,IAAWC,MAAD,IAAY;AAC5DC,EAAAA,OAAO,CAACC,GAAR,CAAY,2BAAZ,EAAyCF,MAAzC;AACAD,EAAAA,IAAI,CAACC,MAAD,CAAJ;AAEA,MAAIA,MAAM,CAACG,IAAP,KAAgBX,GAApB,EAAyB;AAEzB,QAAM;AAAEY,IAAAA,GAAF;AAAOC,IAAAA,SAAP;AAAkBC,IAAAA,SAAlB;AAA6BC,IAAAA,KAA7B;AAAoCC,IAAAA;AAApC,MAAgDR,MAAM,CAACS,OAA7D,CAN4D,CAQ5D;;AACAlB,EAAAA,KAAK,CAACmB,QAAN,CAAeF,OAAf,CAAuBG,MAAvB,CAA8B,cAA9B,IAAgD,kBAAhD;;AAEA,MAAIJ,KAAJ,EAAW;AACTT,IAAAA,QAAQ,CAACH,QAAQ,CAACY,KAAD,CAAT,CAAR;AACD;;AAEDhB,EAAAA,KAAK,CACFqB,OADH,CACW;AACPR,IAAAA,GADO;AAEPS,IAAAA,MAAM,EAAE,KAFD;AAGPL,IAAAA;AAHO,GADX,EAMGM,IANH,CAMQ,CAAC;AAAEC,IAAAA;AAAF,GAAD,KAAc;AAClBd,IAAAA,OAAO,CAACC,GAAR,CAAYa,IAAZ;AACAjB,IAAAA,QAAQ,CAACO,SAAS,CAACU,IAAD,CAAV,CAAR;AACD,GATH,EAUGC,KAVH,CAUUC,KAAD,IAAW;AAChBnB,IAAAA,QAAQ,CAACJ,QAAQ,CAACuB,KAAD,CAAT,CAAR;AACAnB,IAAAA,QAAQ,CAACQ,SAAS,CAACW,KAAD,CAAV,CAAR;;AAEA,QAAIA,KAAK,CAACC,QAAN,IAAkBD,KAAK,CAACC,QAAN,CAAeC,MAAf,KAA0B,GAAhD,EAAqD;AACnDrB,MAAAA,QAAQ,CAACL,YAAY,CAAC2B,MAAM,CAACC,QAAP,CAAgBC,QAAjB,CAAb,CAAR;AACD;AACF,GAjBH,EAkBGC,OAlBH,CAkBW,MAAM;AACb,QAAIhB,KAAJ,EAAW;AACTT,MAAAA,QAAQ,CAACF,MAAM,CAACW,KAAD,CAAP,CAAR;AACD;AACF,GAtBH;AAuBD,CAtCD;;AAwCA,eAAeV,aAAf","sourcesContent":["import axios from \"axios\";\r\nimport {\r\n  API,\r\n  accessDenied,\r\n  apiError,\r\n  apiStart,\r\n  apiEnd,\r\n} from \"../Actions/apiFootball.actions\";\r\n\r\nconst apiMiddleware = ({ dispatch }) => (next) => (action) => {\r\n  console.log(\"getting in api middleware\", action);\r\n  next(action);\r\n\r\n  if (action.type !== API) return;\r\n\r\n  const { url, onSuccess, onFailure, label, headers } = action.payload;\r\n\r\n  // axios default configs\r\n  axios.defaults.headers.common[\"Content-Type\"] = \"application/json\";\r\n\r\n  if (label) {\r\n    dispatch(apiStart(label));\r\n  }\r\n\r\n  axios\r\n    .request({\r\n      url,\r\n      method: \"GET\",\r\n      headers,\r\n    })\r\n    .then(({ data }) => {\r\n      console.log(data);\r\n      dispatch(onSuccess(data));\r\n    })\r\n    .catch((error) => {\r\n      dispatch(apiError(error));\r\n      dispatch(onFailure(error));\r\n\r\n      if (error.response && error.response.status === 403) {\r\n        dispatch(accessDenied(window.location.pathname));\r\n      }\r\n    })\r\n    .finally(() => {\r\n      if (label) {\r\n        dispatch(apiEnd(label));\r\n      }\r\n    });\r\n};\r\n\r\nexport default apiMiddleware;\r\n"]},"metadata":{},"sourceType":"module"}